---
sidebar: true
prev: false
next: /read/JavaScriptAdvancedProgramming/第三章：基本概念
---

# 第二章：在HMTL中使用script标签

## `<script>`标签的六个属性

1. `async`: 可选。
    - 表示应该立即下载脚本，但不应妨碍页面中的其他操作，比如下载其他资源或等待加载其他脚本。
    - 只对外部脚本文件有效

2. `charset`: 可选。

    - 表示通过src属性指定的代码的字符集。
    - 不过由于大多数浏览器会忽略它的值，因此这个属性很少有人用

3. `defer`: 可选。

    - 表示脚本可以延迟到文档完全被解析和显示之后再执行。
    - 只对外部文件有效

4. `language`: 已废弃。

5. `src`: 可选。

    - 表示包含要执行代码的外部文件

    - `script`标签里面就不可再嵌入代码

6. `type`: 可选。

    - 可以看成`language`的替代属性

    - 表示编写代码使用的脚本语言的内容类型（也可称为MIME类型）

    - 如果没有指定这个属性，则其默认值仍为`text/javascript`

## 使用`script`标签的方式有两种

1. 直接在页面中嵌入`javascript`代码

    - 在使用`script`标签嵌入javascript代码时，只须为`script`指定type属性。

    - 包含在`script`内部中的javascript代码将被从上至下依次解析。

    - 在使用`script`嵌入javascript代码时，不能在代码中的任何地方出现`</script>`字符串.
    
      - 原因：因为按照解析嵌入式代码的规则，当浏览器遇到字符串`</script>`时,就会认为那是结束的`</script>`标签.

      - 解决: 将`</script>`改为`<\/script>`

2. 包含外部`javascript`文件。

    - `src`属性是必需的，这个属性的值是一个指向外部javascript文件的链接。如

      ```javascript
      <script type="text/javascript" src="example.js"></script>
      ```
    - 带有src属性的`script`标签不应该在标签之间再嵌入`javascript`代码。如果包含了嵌入的代码，则只会下载并执行外部脚本文件，嵌入的代码会被忽略。

## script标签的解析顺序和位置摆放

1. 无论如何包含代码，只要不存在defer和async属性，浏览器都会按照script标签在页面中出现的先后顺序对它们依次进行解析。

2. `script`标签一般都入在`<body>`标签中页面的内容后面

     - 目的: 
        
        1. 在解析包含的`javascript`代码之前,页面的内容将完全呈现在浏览器中，而用户也因浏览器窗口显示空白页面的时间缩短而感到打开页面的速度加快

        2. 如果代码有调用页面中的元素,等页面内容加载完才执行代码不会报错

3. 延迟脚本

    - 利用`defer`属性。这个属性的作用是告诉浏览器脚本会被延迟到整个页面都解析完毕后再执行代码。

    - 但在现实中，如果有两个以上延迟脚本时，延迟脚本并不一定会按照摆放顺序执行，也不一定会在`DOMContentLoaded`事件触发前执行.因此
    
        - 最好只包含一个延迟脚本

4. 异步脚本

    - 利用`async`属性。这个属性的作用表示脚本不必等待其他脚本，也不必阻塞文档呈现。

    - 建议异步脚本不要在加载期间操作`DOM`，因为可以`DOM`还未加载完成

    - 两个以上的异步脚本同样不一定按摆放的顺序执行，所以要确保脚本之间互不依赖。

## 推荐尽量使用外部文件

1. 可维护性: 将`javascript`代码抽出为外部文件, 可以让开发人员在不触及HTML标记的情况下，集中米精力编辑`javascript`代码

2. 可缓存: 浏览器能够根据具体的设置缓存链接的所有外部`javascript`文件。

3. 适应未来：通过外部文件来包含javascript无须使用前面提到的XHTML或注释hack。HTML和XHTML包含外部文件的语法是相同的

## `<noscript>`标签

> 包含在`<noscript>`中的内容只有在下列情况下才会显示出来

1. 浏览器不支持脚本

2. 浏览器支持脚本，但脚本被禁用

> 目的: 指定在不支持脚本的浏览器中显示的替代内容，但在启用了脚本的情况下，浏览器不会显示`<noscript>`标签中的任何内容
