---
sidebar: true
prev: /read/JavaScriptAdvancedProgramming/第二章：在HTML中使用script标签
next: /read/JavaScriptAdvancedProgramming/第四章：变量、作用域和内存问题
---

# 第三章: 基本概念

## 语法

1. 区分大小写

  > ECMAScript中的一切(变量、函数名、操作符)都区分大小写

2. 标识符

  > 所谓标识符，就是指变量、函数、属性的名字，或者函数的参数。

  - 标识符规则
  
      - 第一个字符必须是一个字母、下划线（_）或一个美元符号（$）

      - 其他字符可以是字母、下划线、美元符号或数字。

3. 注释

    - 单行注释

    ```javascript{.line-numbers}
    // 单行注释
    ```
    - 多行注释

    ```javascript{.line-numbers}
    /*
    * 这是一个多行注释
    * 块级注释
    */
    ```
4. 严格模式

  - 添加`"use strict"`代码来启用严格模式

## 变量

> javacript的变量是松散类型的，所谓松散类型就是可以用来保存任何类型的数据。换名话说，每个变量仅仅是一个用于保存值的点位符而已。

  - 定义变量时要使用var操作符，如：

  ```javascript{.line-numbers}
  var message;
  ```

  这行代码定义了一个message的变量，该变量可以用来保存任何值（像这样未经过初始化的变量，会保存一个特殊的值--undefined）。javascript也支持直接初始化变量，因此在定义变量的同时就可以设置变量的值，如下所示
  ```javascript{.line-numbers}
  var message = "hi"；
  ```
  在此，变量message中保存了一个字符串值"hi"。像这样初始化变量并不会把它标记为字符串类型，初始化的过程就是给变量赋一个值那么简单。因此，可以在修改变量的同时修改值的类型，如下
  ```javascript{.line-numbers}
  var message = "hi";
  message = 100;
  ```
  - note: 使用var操作符定义的变量将成为该变量的作用域中的局部变量。也就是说，如果在函数中使用var定义一个变量，那么这个变量在函数退出后就会被销毁。

  - note: 如果省略var操作符，那么定义的变量就是全局变量，不过这不推荐，一个很难维护，二会一直占内存

  -可以使用一个语句定义多个变量，通过逗号（,）分隔开即可：
  ```javascript{.line-numbers}
  var message = "hi",
      found = false,
      age = 20;
  ```
## 数据类型

javascript中有5种简单类型（也称为基本数据类型）:

  - Undefined

  - Null

  - Boolean

  - Number

  - String

还有1种复杂数据类型（也称引用数据类型）：

  - Object

      - Object本质上是由一组无序的名值对组成的。

1. typeof 操作符

鉴于javascript是松散类型的，因此需要一种手段来检测给定变量的数据类型---typeof就是负责提供这方面信息的操作符。对一个值 使用typeof操作符可能返回以下某个字符串：

  - "undefined"---如果这个值未定义

  - "boolean"---如果这个值是布尔值

  - "String"---如果这个值是字符串

  - "number"---如果这个值是数值

  - "object"---如果这个值是对象或null

  - "function"---如果这个值是函数

>note: typeof是一个操作符而不是函数，所以后面的圆括号可以要也可以不要

2. Undefined类型

Undefined类型只有一个值，即特殊的undefined。在使用var声明变量但未对其加以初始化时，这个变量的值就是undefined。

>note： 对未初始化的变量与未声明的变量执行typeof操作符时都会返回undefined值。

3. Null类型

Null类型是第二个只有一个值的数据类型， 这个特殊的值就是null。从逻辑角度来看，null表示一个空对象指针，而这也正是typeof操作符检测null值时会返回"object"的原因.
如果定义的变量准备在将来用于保存对象，那么最好将该变量初始化为null而不是其他值。这样一来，只要直接检查null值 就可以知道相应的变量是否已经保存了一个对象的引用

4. Boolean类型

Boolean类型有两个值: true 和 false

下表给出了各种数据类型及其对应的转换规则：

数据类型 | 转换为true的值 | 转换为false的值
-------- | ----- | ------ 
Boolean | true | false
String | 非空字符串 | ""( 空字符串)
Number | 非零数值（包括无穷大） | 0 和NaN
Object | 任何对象 | null
Undefined | 无 | undefined

 5. Number类型

 Number类型使用IEEE754格式来表示整数和浮点数。

  - 整数

      - 十进制整数

      - 八进制整数: 以0o开头（也可以0开头）（0-7序列）

      - 十六进制整数： 以0x开头（0-9及a-f），字母可以大写也可以小写。

  > 在进行计算进，所有以八进制和十六进制表示的数值最终都将被转换成十进制数值。

  - 浮点数值

    - 浮点数值，就是该数值中必须包含一个小数点，并且小数点后面必须至少有一位数字。（小数点前面可以没有整数）

    - 由于保存浮点数值需要的内存空间是保存整数值的两倍，因此javascript会不失时机地将浮点数值转换为整数值.

    - 对于极大值或极小的数值,可以用e表示法（即科学计数法）表示的浮点值表示。用e表示法的数值等于e前面的数值乘以10的指数将次幂。如

    ```javascript{.line-numbers}
    var floatNum1 = 3.125e7; // 等于31250000
    var floatNum2 = 3e-7; // 等于0.0000003
    ````
    - 精度问题

        - 浮点数值的最高精度是17位小数，但在进行算术计算时其精确度远远不如整数。例
        ```javascript{.line-numbers}
        0.1 + 0.2 === 0.30000000000000004 // true
        ```
        所以永远不要测试某个特定的浮点数值。

        - 原因：这是使用基于IEEE754数值的浮点计算的通病。

  - 数值范围

      - 最小值：Number.MIN_VALUE === 5e-324

      - 最大值: Number.MAX_VALUE === 1.7976931348623157e+308

      - 正无穷大: Infinity。如果大于最大值会自动转换为Infinity。Number.NEAGTIVE_INFINITY === Infinity

      - 负无穷大: -Infinity。 如果小于最小值会自动转换为-Infinity。 Number.POSITIVE_INFINITY === -Infinity

  - NaN

      - NaN,即非数值（Not a Number）是一个特殊的数值，这个数值用于表示一个本来要返回数值的操作数未返回数值的情况（这样就不会抛出错误了）。在javascript中，任何数值以0会返回NaN,因此不会影响其他代码的执行。

      - 特点

          1. 任何涉及NaN的操作（NaN/10）都会返回NaN,这个特点在多步计算中有可能导致问题。

          2、 NaN与任何值都不相等，包括NaN本身。

      - isNaN()函数: 接受一个参数，用于判断这个参数是否"不是数值"

  - 数值转换: 
  有3个函数可以把非数值转换为数值：

      - Number()

          - 如果是Boolean值，true和false将分别被转换为1 和 0

          - 如果是数字值，只是简单的传入和返回

          - 如果是null值，返回0

          - 如果是undefined，返回NaN

          - 如果是字符串，遵循下列规则：

              - 如果中包含数字（包含+或-）,则将其转换为十进制数值（注意： 前导的零会被忽略，不管有多少个0）

              - 如果包含有效的浮点格式，则返回对应的浮点数值

              - 如果包含有效的八进制或十六进制，如"0o"或"0x"，则将其转换为相同大小的十进制整数值

              - 如果是空字符或空，则返回0

              - 如果字符串中包含除上述格式之外的字符，则将其转换为NaN

          - 如果是对象，则调用对象的valueOf()方法，然后依照前面的规则转换主国返回的值

      - parseInt(String, radix) 

          - parseInt()的转换字符串时，更多的是看其是否符合数值模式。它会忽略字符串前面的空格，直至找到第一个非空格字符。如果第一个字符不是数字字符或负号，parseInt()就会返回NaN; 也就是说，用parseInt() 转换空字符串会返回NaN。如果第一个字符是数字字符，parseInt()会继续解析第二个字符，直到解析完所有后续字符或者由遇到了一个非数字字符。例如， "1234blue"会转换为1234，因为"blue"会被完全忽略。类似地，"22.5"会转换为22，因为小数点并不是有效的数字字符。
          如果字符串中的第一个字符是数字字符，parseInt()也能够识别出各种整数格式。也就是说，如果字符串  以"0x"开头且后跟数字字符，就会将其当作一个十六进制整数；如果字符串以"0o"开头且后跟数字字符，则会将其当作一个八进制数来解析。
          函数提供第二个参数：转换时使用的基数（即多少进制）。如果知道要解析的值是十六进制格式的字符串，那么指定基数16作为第二个，可以保证得到正确的结果。实际上，如果指定了16作为第二个参数，字符串可以不带前面的"0x".
      
      - parseFloat(String)

          - parseFloat()是从第一个字符（位置为0）开始解析每个字符。而且也是一直解析到字符串末尾，或者解析到遇见一个无效的浮点数字字符为止。也就是说，字符串中的第一个小数点是有效的，而第二个小数点就是无效的了，因此它后面的字符串将被忽略。
          - note： parseFloat()不能识别十六进制和八进制，都会转换为0。由于parseFloat()只能解析十进制，所以没有第二个参数。

6. String 类型

  - String类型用于表示由零个或多个16位Unicode字符组成的字符序列，即字符串。字符串可以由双引号（"）或单引号（'）表示。

      - 字符字面量

          - String数据类型包含一些特殊的字符字面量，也叫转义序列，用于表示非打印字符，或者具有其他用途的字符。这些字符字面量如下所示：

          字面量 | 含义
          ---| ---
          \n | 换行
          \t | 制表
          \b | 空格
          \r | 回车
          \\\ | 斜杠
          \\' | 单引号，在用单引号表示的字符串中使用
          \\" | 双引号，在用双引号表示的字符串中使用
          \xnn | 以十六进制代码nn表示的一个字符。例如\x41表示"A"
          \unnn | 以十六进制代码nnn表示的一个Unicode字符（其中n为0-F）。例如，\u03a3表示希腊字符E

          - note: 转义序列表示1个字符，不管这个转义字符有多长。

      - 字符串的特点

          - 字符串是不可变的。也就是说，字符串一旦创建，它们的值就不能改变。要改变某个变量保存的字符串，首先要销毁原因的字符串，然后再用别一个包含新值的字符串填充该变量。

      - 转换为字符串

          - str.toString(redix)

              - 除了null和undefined外,其他值都会有toString()方法，作用就是将值转换为对应的字符串

              - redix: 转出数值的基数。默认情况下，toString()方法以十进制格式返回数值的字符串表示。而通过传递基数，toString()可以转出以二进制、八进制、十六进制，及至其他任意有效进制格式表示的字符串值。

          - String()

            - String()函数的转换规则：

              - 如果值有toString()方法，则调用该方法

              - 如果是null或undefined,则返回对应的字符串

7. Object类型

  - 对象其实就是一组数据和功能的集合

    - 对象可以通过执行new操作符后跟要创建的对象类型的名称来创建.如

        ```javascript
        var o = new Object()
        var o = new Object // 有效，但不推荐
        ```
    - 在javascript中，Object类型是所有它的实例基础。Object类型所具有的任何属性和方法也同样存在于理具体的对象中。

    - Object的每个实例都具有下列属性和方法

        - constructor: 保存着用于创建当前对象的函数，也就是构造函数。

        - hasOwnProperty(propertyName): 用于检查给定的属性在当前对象实例中（而不是实例原型中）是不否存在。其中参数的属性名必须以字符串形式指定

        - isPrototypeOf(object): 用于检查传入的对象是否是另一个对象的原型

        - propertyIdEnumerable(propertyName): 用于检查给定的属性是否能够使用for-in语句来枚举。

        - toLocaleString(): 返回对象的字符串表示，该字符串与执行环境的地区对应。

        - toString(): 返回对象的字符串表示

        - valueOf(): 返回对象的字符串、数值、或布尔值表示。通常与toString()方法的返回值相同。

    - BOM和DOM中的对象, 都属于宿主对象,因为它们是由宿主实现提供和定义的.而ECMA-262不负责定义宿主对象，因此宿主对象可能会也可能不会继承object

## 操作符

1. 一元操作符

    只能操作一个值的操作符叫做一元操作符。

    - 前置递增和递减操作符

        - ++或--放在变量的前面，给变量加1或减1

        - 执行前置递增和递减操作时，变量的值都是在语句被求值以前改变的。

    - 后置递增和递减操作符

        - ++或--放在变量的后面，给变量加1或减1

        - 执行后置递增和递减操作时，变量的值是语句求值之后才改变。

    - 在应用于不同的值时，递减和递增操作符遵循下列规则：

        - 先将变量的值通过Number()方法变成对应的数值，再执行加减1操作

2. 一元加和减操作符

    - 执行过程： 该操作符会像Number()转型函数一样对这个值执行转换，再加上对就+或-符号

3. 布尔操作符

    - 逻辑非（NOT）
    
        - 逻辑非操作符由一个叹号（!）表示，可以应用于javascript中的任何值。无论这个值是什么数据类型，这个操作符都会返回一个布尔值。逻辑非操作符首先会将它的操作数转换为一个布尔值，然后再对其求反。

        - 返回为turer情况(共六种):

            1. 空字符串
            2. NaN
            3. undefined
            4. null
            5. 0
            6. false

        - 同时使用两个逻辑非操作符，实际上就会模拟Boolean()转型函数的行为,将一个值转换为对应的布尔值。

    - 逻辑与（AND）

        - 逻辑与操作符由两个和号（&&）表示。

        - 逻辑与的真值表如下：

            第一个操作符 | 第二个操作符 | 结果
            --- | --- | ---
            true | true | true
            true | false | false
            false | true | false
            false | false | false
        
        - 逻辑与操作可以应用于任何类型的操作符，而不仅仅是布尔值。它遵循下列规则：

            - 如果第一个操作数为对象，则返回第二个操作数

            - 如果第二个操作数是对象，则只有在第一个操作数的求值结果为true的情况下才会返回该对象

            - 如果两个操作数都是对象，则返回第二个操作数

            - 如果有一个操作数是null，则返回null

            - 如果有一个操作数是NaN, 则返回NaN

            - 如果有一个操作数是undefnied，则返回undefined
        
        - 逻辑与操作属于短路操作，即如果第一个操作数能够决定结果，那么就不会再对第二个操作数求值。对于逻辑与操作而言，如果第一个操作数是false，则无论第二个操作数是什么值，结果都不再可能是true了。

    - 逻辑或（OR）

        - 逻辑或操作符由两个竖线符号（||）表示

        - 逻辑或的真值表如下：

            第一个操作符 | 第二个操作符 | 结果
            --- | --- | ---
            true | true | true
            true | false | true
            false | true | true
            false | false | false

        - 逻辑或遵循以下规则：

            - 如果第一个操作数是对象，则返回第一个操作数

            - 如果第一个操作数的求值为false，则返回第二个操作数

            - 如果两个操作数都是对象，则返回第一个操作数

            - 如果两个操作数都null，则返回null

            - 如果两个操作数都NaN,则返回NaN

            - 如果两个操作数都是undefined,则返回undefined

        - 与逻辑与操作符一样，逻辑或操作符也是短路操作符。

4. 乘性操作符

    - javascript定义了3个乘性操作符： 乘法、除法、 求模.使用这些操作符时，会在操作数为非数值的情况下会执行自动的类型转换。也就使用Number()转型函数。

    - 乘法
        - 用一个星号（*）表示

        - 如果操作数都是数值，执行常规的乘法计算，超过数值的表示范围则返回Infinity或-Infinity

        - 如果有一个操作数是NaN,则返回NaN

        - 如果是Infinity与0相乘，则结果是NaN

        - 如果Infinity与非零0数值相乘，结果是（+或-）Infinity

        - 如果Infinity与Infinity，则结果为Infinity

    - 除法

        - 用一个斜线符号（/）表示

        - 如果操作数都是数值，执行常规的除法计算。如果超过数值的表示范围，则返回Infinity或-Infinity

        - 如果有一个操作数是NaN,则结果是NaN

        - 如果是Infinity被Infiinity除，则结果是NaN

        - 如果是零被零除，则结果是NaN

        - 如果是非零的有限数被零除，则结果是Infinity或-Infinity。

        - 如果是Infinity被任何非零除，则结果是Infinity或-Infinity

    - 求模
    
        - 求模（余数）操作符由一个百分号（%）表示

        - 如果操作数都是数值，执行常规的除法计算，返回除得的余数

        - 如果被除数是无穷大值而险是除数是有限大的数值，则返回NaN

        - 如果被除数是有限大的数值而除数是零，则结果是NaN

        - 如果是Infinity被Infinity除，则结果是NaN

        - 如果被除数是有限大的数值而除数是无穷大的数值，则结果是被除数

5. 加性操作符

    - 加法

        - 规则

            - 如果有一个操作数是NaN,则结果是NaN

            - 如果Infinity加Infinity, 则结果为Infinity

            - 如果-Infinity加-Infinity，则结果为-Infinity

            - 如果-Infiinity加Infinity，则结果为NaN

            - +0 + +0 = +0；-0 + -0 = -0； +0 + -0 =+0；
        
        - 如果有一个操作数是字符串，那么就要应用如下规则：

            - 将两个操作符进行字符串拼接（如果操作数不是字符则先将其转换为字符串）

    - 减法

        - 规则

            - 如果有一个操作数是NaN, 则结果为NaN

            - Infinity - Infinity = NaN；
            -Infinity - -Infinity = NaN； 
            Infinity - -Infinity = Infinity；
            -Infinity - Infinity = -Infinity

            - +0 - +0 = +0;
            -0 - -0 = +0
            +0 - -0 = -0;

6. 关系操作符

    - 小于（<）、大于（>）、小于等于（<=）和大于（>=）这几个关系操作符用于对两个值进行比较。这个几个操作符都返回一个布尔值

    - 规则

        - 如果两个操作数是数值，则进行数值比较

        - 如果两个操作数是字符串， 则比较两个字符串对应的字符编码值

        - 如果一个操作数是数值，则将另一个操作数转换为一个数值，然后进行数值比较

        -  如果一个操作数是对象， 则调用这个对象的valueOf()方法，用得到的结果按照前面的规则执行比较，如果没有valueOf()则调用toString()

        - 如果有一个操作数是布尔值，则先将其转换为数值，然后再比较

        - 如果有一个操作数是字符串，而另一个操作数不是数值，则另一个操作数会先转换为字符串，再比较两个字符串对应的字符编码值

        - 字符串比较： 先比较第一个，如果相等再比较第二个，依次下去

7. 相等操作符

    - 相等和不相等

        - 相等（==），不相等（!=），这个两个操作符都会先转换操作数（通常称为强制转换），然后再比较它们的相等性

        - 规则

            - 如果有一个操作数是布尔值，则先将其转换为对应的数值

            - 如果有一个操作符是字符串，另一个操作数是数值，在先将字符串转换为数值

            - 如果一个操作数是对象，另一个操作数不是，则调用对象的valueOf()方法，用得到的基本类型值按照前面的规则进行比较

            - null == undefined // true

        - 一些特殊情况及比较结果：

            表达式 | 值
            -- | --
            null == undefined | true
            NaN == NaN | false
            NaN != NaN | true
            false == 0 | true
            undefined == 0 | false
            undefined == false | fasle
            null == false | false

    - 全等和不全等

        - 全等（===）和不全等（!==）

        - 不会对操作数进行类型转换

8. 条件操作符

    - 也就是三元运算符

    ```javascript
    variable = boolean_expression ? true_value : false_value
    ```

9. 赋值操作符

    - 等于号（=），作用： 把右侧的值赋给左侧的变量

    - 复合赋值操作符

        - 乘赋值（*=）

        - 除赋值（/=）

        - 模赋值（%=）

        - 加赋值（+=）

        - 减赋值（-=）

10. 逗号操作符

    - 作用逗号操作符可以在一个语句中执行多个操作

    - 逗号操作符还可以用于赋值

        ```javascript
        var num = (5, 1, 4, 8 , 0) // num 的值为0
        ```
    - 在函数里，return后面如果有逗号操作符，则只返回最右侧的值

        ```javascript
        function () {
            return 1, 2, 3
        }
        // 返回值为3
        ```

## 语句

1. if语句

    - 语法

        ```javascript
        if (condition1) statement1 else if (condition2) statement2 else statement3
        ```
2. do-while语句

    - do-while语句是一种后测试语句，即只有在循环体中的代码执行之后，才会测试出口条件，也就是说，在对条件表达式求值之前，循环体内的代码至少会被执行一次。

    - 语法： 

        ```javascript
        do {
            statement
        } while (expression)
        ```
3. while 语句

    - while语句属于前测试循环语句

    - 语法： 
        ```javascript
        while (expression) statement
        ```
4. for 语句

    - for语句也是一种前测试循环语句，但它具有在执行循环之前初始化变量和定义循环后要执行的代码的能力。

    - 语法： 
        ```javascript
        for (init; expression; post-loop-expression) statement
        ```
5. for-in 语句

    - for-in语句是一种精准的迭代语句，可以用来枚举对象的属性

    - 语法：

        ```javascript
        for (property in expression) statement 
        ```
    - 通过for-in循环输出的属性的顺序是不可预测的

6. label语句

    - 使用label语句可以在代码中添加标签，以便将来使用

    - 语法

        ```javascript
        label: statement
        ```
    - 可以由break或continue语句引用

7. break 和 continue语句

    - break语句会立即退出当前循环（只能退一层）， 强制执行循环后面的语句
    
    - continue语句会立即退出循环，但退出循环后会从循环的顶部继续执行

8. swith语句

    - 语法：

        ```javascript
        switch (expression) {
            case value: statement
                break;
            case value: statement
                break;
            default: statement
        }
        ```
## 函数

- 语法：

    ```javascript
    function functionName (arg0, arg1, ..., agrN) {
        statement
    }
    ```
- 函数在定义时不必指定是否返回值，可以通过return返回值

- 函数的参数

    - javascript函数不介意传递进来多少个参数，也不在乎传进来参数是什么数据类型。原因：javascript中的参数在内部是用一个数组来表示的。函数接收到的始终都是这个数组，而不关心数组中包含哪些参数。

    - 通过arguments对象来访问参数数组，arguments是类数组，可以通过方括号来访问，也可以通过length来确定有多少个参数， arguments的值永远与对应命名参数的值保持同步

    - 没有重载，javascript中定义两个名字相同的函数，则该名字只属于后定义的函数